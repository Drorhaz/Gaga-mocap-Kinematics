current_csv: 763\T2\763_T2_P2_R2_Take_2025-12-25 10.51.23 AM_005.csv
data_dir: data
derivatives_dir: derivatives
fs_target: 120.0
min_run_seconds: 5.0
project_root: .
qc_dir: qc
# Exclude finger and toe segments from processing
# When true, excludes all hand fingers (Thumb, Index, Middle, Ring, Pinky) and foot toes (ToeBase)
# See FINGER_TOE_SEGMENTS_MAPPING.md for complete list of excluded segments
exclude_fingers: true

# Filtering (notebook 04) - method and parameters from config_v1.yaml
# method: "3_stage" | "per_region" | "single_global"
filtering:
  method: "3_stage"   # 3_stage | per_region | single_global

  # --- 3-stage pipeline (method = 3_stage) ---
  # Artifact detection -> Hampel -> Adaptive Winter per-joint
  velocity_limit: 5000.0      # mm/s - spike detection on position-derived velocity
  zscore_threshold: 5.0       # sigma - artifact flag
  stage1_interpolation_method: "pchip"  # pchip (default) | linear | cubic - fill artifact gaps
  hampel_window: 5            # frames
  hampel_n_sigma: 3.0         # sigma for Hampel outlier replacement
  winter_fmin: 1.0            # Hz - Winter search range
  winter_fmax: 20.0           # Hz
  per_joint_winter: true      # adaptive cutoff per joint

  # --- Per-region fixed cutoffs (method = per_region). Winter (2009), Robertson (2014) ---
  fmax: 12.0                  # Hz - max cutoff for legacy path
  allow_fmax: true

  # --- Single global cutoff (method = single_global) - one cutoff for all joints ---
  cutoff_hz: 8.0              # Hz - used only when method = single_global

  # --- Quaternion median filter (applied after position filtering) ---
  apply_quaternion_median_filter: true
  quaternion_window_size: 5   # frames

  # --- PSD validation (notebook 04 validation section) ---
  # Bands used for filter quality metrics (Welch PSD). Align dance_band with effective cutoff (e.g. 1-13 Hz if cutoff ~10 Hz).
  validation_dance_band_hz: [1, 13]   # Hz - "signal" band for preservation metric
  validation_noise_band_hz: [20, 50]  # Hz - "noise" band for attenuation metric
