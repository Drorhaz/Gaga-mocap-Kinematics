╔════════════════════════════════════════════════════════════════════════════════╗
║                    GATE 5 FIX VALIDATION - QUICK CARD                          ║
╚════════════════════════════════════════════════════════════════════════════════╝

┌─ CURRENT STATUS ────────────────────────────────────────────────────────────┐
│  ❌ 0/33 recordings have Gate 5 data (0%)                                   │
│  ⚠️  All 33 need processing                                                 │
└─────────────────────────────────────────────────────────────────────────────┘

┌─ HOW TO VALIDATE ───────────────────────────────────────────────────────────┐
│                                                                              │
│  Run this command:                                                           │
│    python validate_gate5_fix.py                                             │
│                                                                              │
│  Exit codes:                                                                 │
│    0 = All recordings valid ✅                                              │
│    1 = Some recordings invalid ❌                                            │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘

┌─ VALIDATION CHECKS ─────────────────────────────────────────────────────────┐
│                                                                              │
│  For each recording, the script checks:                                      │
│                                                                              │
│  ✓ JSON file exists and loads                                               │
│  ✓ step_06_burst_analysis field present                                     │
│  ✓ step_06_burst_decision field present                                     │
│  ✓ step_06_frames_to_exclude field present                                  │
│  ✓ Classification counts populated (artifacts/bursts/flows)                 │
│  ✓ Frame statistics present (artifact_rate_percent)                         │
│  ✓ Decision status is valid (ACCEPT/REVIEW/REJECT)                          │
│  ✓ Parquet mask file exists and loads                                       │
│  ✓ Mask has correct columns (frame_idx, time_s, max_tier)                   │
│  ✓ Gate 4 fields present (ISB compliance, math status)                      │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘

┌─ BEFORE FIX (Current State) ────────────────────────────────────────────────┐
│                                                                              │
│  python validate_gate5_fix.py                                               │
│    [FAIL] Invalid: 33 (100.0%)                                              │
│    Missing Gate 5 fields: step_06_burst_analysis, ...                       │
│                                                                              │
│  Excel Quality Report columns:                                              │
│    Burst_Artifact_Count: 0, 0, 0, 0, ...                                    │
│    Burst_Count: 0, 0, 0, 0, ...                                             │
│    Burst_Flow_Count: 0, 0, 0, 0, ...                                        │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘

┌─ AFTER FIX (Expected) ──────────────────────────────────────────────────────┐
│                                                                              │
│  python validate_gate5_fix.py                                               │
│    [OK] Valid: 33 (100.0%)                                                  │
│    Total Artifacts: ~7,234                                                  │
│    Total Bursts: ~1,456                                                     │
│    Total Flows: ~389                                                        │
│    [SUCCESS] All recordings have valid Gate 5 data!                         │
│                                                                              │
│  Excel Quality Report columns:                                              │
│    Burst_Artifact_Count: 234, 189, 312, 156, ...                            │
│    Burst_Count: 45, 38, 67, 29, ...                                         │
│    Burst_Flow_Count: 12, 15, 23, 8, ...                                     │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘

┌─ VALIDATION WORKFLOW ───────────────────────────────────────────────────────┐
│                                                                              │
│  1. Before fix:                                                              │
│     python validate_gate5_fix.py                                            │
│     → Shows 0/33 valid ❌                                                    │
│                                                                              │
│  2. Apply fix (for each recording):                                          │
│     - Open notebook 06_rotvec_omega.ipynb                                    │
│     - Set RUN_ID                                                             │
│     - Run "GATE 4 & 5 INTEGRATION" cell                                      │
│                                                                              │
│  3. After fix:                                                               │
│     python validate_gate5_fix.py                                            │
│     → Shows 33/33 valid ✅                                                   │
│                                                                              │
│  4. Update report:                                                           │
│     - Run notebook 07_master_quality_report.ipynb                            │
│     - Check Excel: Burst columns should be populated                         │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘

┌─ VALIDATE SINGLE RECORDING ─────────────────────────────────────────────────┐
│                                                                              │
│  python validate_gate5_fix.py "734_T1_P1_R1_Take 2025-12-01 02.18.27 PM"   │
│                                                                              │
│  Shows detailed validation for one recording:                                │
│    - All checks (pass/fail)                                                  │
│    - Event counts (artifacts, bursts, flows)                                 │
│    - Decision status and reason                                              │
│    - Mask file shape and validity                                            │
│    - Any warnings or errors                                                  │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘

┌─ MANUAL VALIDATION ─────────────────────────────────────────────────────────┐
│                                                                              │
│  Quick Python check:                                                         │
│                                                                              │
│    import json                                                               │
│    with open("derivatives/step_06_kinematics/{RUN_ID}__kinematics_summ...  │
│        data = json.load(f)                                                   │
│                                                                              │
│    # Should all be True:                                                     │
│    print('step_06_burst_analysis' in data)                                   │
│    print('step_06_burst_decision' in data)                                   │
│                                                                              │
│    # Should show real counts:                                                │
│    print(data['step_06_burst_analysis']['classification'])                  │
│    # → {'artifact_count': 234, 'burst_count': 45, ...}                      │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘

┌─ EXPECTED VALUES ───────────────────────────────────────────────────────────┐
│                                                                              │
│  Per recording (typical ranges):                                             │
│    Artifacts (Tier 1): 50-500                                                │
│    Bursts (Tier 2): 10-100                                                   │
│    Flows (Tier 3): 5-30                                                      │
│    Total Events: 100-600                                                     │
│    Artifact Rate %: 0.5-5.0%                                                 │
│                                                                              │
│  Across all 33 recordings:                                                   │
│    Total Artifacts: ~5,000-10,000                                            │
│    Total Bursts: ~1,000-3,000                                                │
│    Total Flows: ~200-500                                                     │
│                                                                              │
│  Decision distribution:                                                      │
│    ACCEPT_HIGH_INTENSITY: 60-80%                                             │
│    REVIEW: 15-30%                                                            │
│    REJECT: 0-10%                                                             │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘

┌─ SUCCESS CRITERIA ──────────────────────────────────────────────────────────┐
│                                                                              │
│  ✅ validate_gate5_fix.py exits with code 0                                 │
│  ✅ All 33 recordings show as valid                                         │
│  ✅ Total events > 5,000 across all recordings                              │
│  ✅ Excel burst columns have non-zero values                                │
│  ✅ No "Missing Gate 5 fields" errors                                       │
│  ✅ Parquet mask files exist for all recordings                             │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘

┌─ FILES REFERENCE ───────────────────────────────────────────────────────────┐
│                                                                              │
│  Validation tools:                                                           │
│    validate_gate5_fix.py         - Main validation script                   │
│    verify_gate5_data.py          - Check data presence                      │
│    test_gate5_structure.py       - Show expected structure                  │
│                                                                              │
│  Documentation:                                                              │
│    GATE_05_VALIDATION_GUIDE.md   - This guide (detailed)                    │
│    GATE_05_QUICK_FIX.md          - Fix instructions                         │
│    GATE_05_README.md             - Overview and summary                     │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════
                            BOTTOM LINE
═══════════════════════════════════════════════════════════════════════════════

  Before:  python validate_gate5_fix.py  → 0/33 valid ❌
  After:   python validate_gate5_fix.py  → 33/33 valid ✅

═══════════════════════════════════════════════════════════════════════════════
